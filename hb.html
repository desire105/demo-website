<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            color: #333;
        }
        
        /* Birthday Message Section */
        .birthday-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 15px;
            min-height: 100vh;
            background: linear-gradient(to bottom, #ffafbd, #ffc3a0);
        }
        
        .birthday-container {
            max-width: 800px;
            width: 100%;
            padding: 25px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            margin: 10px;
        }
        
        /* Decorative Hearts */
        .heart {
            position: absolute;
            color: #ff6b6b;
            font-size: 24px;
            animation: float 6s infinite linear;
            opacity: 0.6;
            z-index: 1;
        }
        
        .heart-1 {
            top: 15px;
            left: 15px;
            animation-delay: 0s;
        }
        
        .heart-2 {
            top: 25px;
            right: 20px;
            animation-delay: 1s;
        }
        
        .heart-3 {
            bottom: 40px;
            left: 25px;
            animation-delay: 2s;
        }
        
        .heart-4 {
            bottom: 20px;
            right: 30px;
            animation-delay: 3s;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.6;
            }
            50% {
                transform: translateY(-15px) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(0) rotate(360deg);
                opacity: 0.6;
            }
        }
        
        /* Typing Container */
        .typing-container {
            min-height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 2;
        }
        
        /* Cursor Styling */
        .cursor {
            display: inline-block;
            width: 3px;
            background-color: #ff6b6b;
            animation: blink 1s infinite;
            margin-left: 5px;
            height: 1.2em;
            vertical-align: middle;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Message Styling */
        .message-line {
            margin-bottom: 20px;
            min-height: 26px;
            line-height: 1.5;
            overflow: hidden;
        }
        
        .message-1 {
            font-size: 2.2rem;
            color: #ff6b6b;
            font-weight: 900;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .message-2 {
            font-size: 1.7rem;
            color: #667eea;
            font-weight: 700;
        }
        
        .message-3 {
            font-size: 1.5rem;
            color: #764ba2;
            font-weight: 600;
            font-style: italic;
        }
        
        .message-4 {
            font-size: 1.4rem;
            color: #ff9a3c;
            font-weight: 600;
        }
        
        .message-5 {
            font-size: 1.3rem;
            color: #4ecdc4;
            font-weight: 500;
        }
        
        .message-6 {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.7;
        }
        
        .emoji {
            font-size: 1.2em;
            margin: 0 3px;
        }
        
        /* Footer */
        .footer {
            margin-top: 30px;
            text-align: center;
            padding-top: 15px;
            border-top: 2px dashed #ff6b6b;
        }
        
        .signature {
            font-size: 1.5rem;
            color: #ff6b6b;
            font-family: 'Brush Script MT', cursive;
            font-weight: bold;
        }
        
        .date {
            font-size: 0.9rem;
            color: #888;
            margin-top: 8px;
        }
        
        /* Replay Button */
        .replay-btn {
            display: block;
            margin: 25px auto 0;
            padding: 12px 30px;
            background: linear-gradient(45deg, #ff6b6b, #ff9a3c);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            position: relative;
            z-index: 2;
        }
        
        .replay-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
        }
        
        /* Hidden Class */
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* PRODUCT CAROUSEL SECTION */
        .product-carousel-section-unique {
            padding: 40px 15px;
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(to bottom, #ffc3a0, #a8c0ff);
            overflow: hidden;
            position: relative;
        }

        .product-carousel-unique {
            width: 100%;
        }

        .carousel-header-unique {
            text-align: center;
            margin-bottom: 30px;
        }

        .carousel-header-unique h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Carousel wrapper */
        .carousel-wrapper-unique {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            overflow: visible;
            width: 100%;
        }

        .carousel-inner-unique {
            overflow: hidden;
            width: 100%;
            border-radius: 16px;
            position: relative;
            flex: 1;
        }

        /* Slides container */
        .slides-container-unique {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            gap: 15px;
            width: auto;
            min-width: 100%;
            padding: 0 5px;
        }

        /* Mobile view - Scrollable container */
        @media (max-width: 768px) {
            .slides-container-unique {
                display: flex;
                overflow-x: auto;
                scroll-snap-type: x mandatory;
                -webkit-overflow-scrolling: touch;
                scroll-behavior: smooth;
                gap: 15px;
                padding: 0 10px 20px 10px;
                margin: 0 -5px;
                width: calc(100% + 10px);
                transition: none !important;
                transform: none !important;
                scrollbar-width: none;
            }
            
            .slides-container-unique::-webkit-scrollbar {
                display: none;
            }
        }

        .product-card-unique {
            flex: 0 0 calc(33.333% - 10px);
            min-width: calc(33.333% - 10px);
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Mobile view - Single card */
        @media (max-width: 768px) {
            .product-card-unique {
                flex: 0 0 calc(100% - 20px) !important;
                min-width: calc(100% - 20px) !important;
                min-height: 320px;
                scroll-snap-align: center;
                margin: 0 5px;
            }
        }

        /* Tablet view - 2 cards */
        @media (min-width: 769px) and (max-width: 1024px) {
            .product-card-unique {
                flex: 0 0 calc(50% - 10px) !important;
                min-width: calc(50% - 10px) !important;
            }
        }

        .product-card-unique:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }

        .img-box-unique {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
            flex-grow: 1;
        }

        .img-box-unique img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card-unique:hover .img-box-unique img {
            transform: scale(1.08);
        }

        .image-text-overlay-unique {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            color: white;
            text-align: left;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0) 100%);
        }

        /* Navigation buttons */
        .nav-btn-unique {
            background: rgba(0, 0, 0, 0.7);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 10;
            transition: all 0.3s ease;
            font-size: 20px;
            color: white;
            flex-shrink: 0;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        .nav-btn-unique:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-btn-unique:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: translateY(-50%) !important;
        }

        /* Button positions */
        .prev-btn-unique {
            left: -25px;
        }

        .next-btn-unique {
            right: -25px;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            /* Birthday message adjustments */
            .birthday-container {
                padding: 20px 15px;
            }
            
            .typing-container {
                min-height: 280px;
            }
            
            .message-1 {
                font-size: 1.8rem;
            }
            
            .message-2 {
                font-size: 1.4rem;
            }
            
            .message-3 {
                font-size: 1.3rem;
            }
            
            .message-4 {
                font-size: 1.2rem;
            }
            
            .message-5 {
                font-size: 1.1rem;
            }
            
            .message-6 {
                font-size: 1rem;
                line-height: 1.6;
            }
            
            .heart {
                font-size: 18px;
            }
            
            .signature {
                font-size: 1.3rem;
            }
            
            .replay-btn {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
            
            /* Carousel adjustments */
            .product-carousel-section-unique {
                padding: 30px 10px;
            }
            
            .carousel-header-unique h2 {
                font-size: 1.5rem;
            }
            
            .product-card-unique {
                min-height: 300px;
            }
            
            /* Hide buttons on mobile */
            .nav-btn-unique {
                display: none !important;
            }
            
            .image-text-overlay-unique {
                padding: 12px;
            }
        }

        @media (max-width: 480px) {
            .message-1 {
                font-size: 1.6rem;
            }
            
            .message-2 {
                font-size: 1.3rem;
            }
            
            .message-3 {
                font-size: 1.1rem;
            }
            
            .birthday-container {
                padding: 15px 12px;
            }
            
            .message-line {
                margin-bottom: 15px;
            }
            
            .product-carousel-section-unique {
                padding: 25px 8px;
            }
            
            .product-card-unique {
                min-height: 280px;
            }
        }

        /* Scroll down indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            z-index: 10;
            cursor: pointer;
        }
        
        .scroll-indicator p {
            margin-bottom: 8px;
            font-size: 1rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            font-weight: 500;
        }
        
        .scroll-down {
            width: 25px;
            height: 40px;
            border: 2px solid white;
            border-radius: 50px;
            margin: 0 auto;
            position: relative;
        }
        
        .scroll-down::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            animation: scroll 2s infinite;
        }
        
        @keyframes scroll {
            0% {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-50%) translateY(15px);
                opacity: 0;
            }
        }
        
        /* Loading placeholder for images */
        .img-box-unique {
            background-color: #f0f0f0;
            background-image: linear-gradient(90deg, #f0f0f0 0%, #fafafa 50%, #f0f0f0 100%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body>
    <!-- Birthday Message Section -->
    <section class="birthday-section" id="birthdaySection">
        <div class="birthday-container">
            <!-- Floating Hearts -->
            <div class="heart heart-1">‚ù§Ô∏è</div>
            <div class="heart heart-2">‚ù§Ô∏è</div>
            <div class="heart heart-3">‚ù§Ô∏è</div>
            <div class="heart heart-4">‚ù§Ô∏è</div>
            
            <!-- Typing Message Container -->
            <div class="typing-container">
                <div class="message-line">
                    <span id="message1" class="message-1"></span>
                    <span class="cursor"></span>
                </div>
                
                <div class="message-line">
                    <span id="message2" class="message-2"></span>
                </div>
                
                <div class="message-line">
                    <span id="message3" class="message-3"></span>
                </div>
                
                <div class="message-line">
                    <span id="message4" class="message-4"></span>
                </div>
                
                <div class="message-line">
                    <span id="message5" class="message-5"></span>
                </div>
                
                <div class="message-line">
                    <span id="message6" class="message-6"></span>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="footer">
                <div class="signature" id="signature">From Someone Special</div>
                <div class="date" id="date">Today</div>
            </div>
            
            <!-- Replay Button -->
            <button class="replay-btn hidden" id="replayBtn">Play Again</button>
        </div>
        
        <!-- Scroll Down Indicator -->
        <div class="scroll-indicator" id="scrollIndicator">
            <p>Scroll for Memories</p>
            <div class="scroll-down"></div>
        </div>
    </section>

    <!-- PRODUCT CAROUSEL SECTION -->
    <div class="product-carousel-section-unique" id="productCarouselSection">
      <section class="product-carousel-unique">
        <div class="carousel-header-unique">
          <h2>Our Beautiful Memories</h2>
        </div>
        
        <div class="carousel-wrapper-unique">
          <!-- Left Button - Desktop Only -->
          <button class="nav-btn-unique prev-btn-unique" id="prevBtnUnique">
            <i class="fas fa-chevron-left"></i>
          </button>
          
          <!-- Carousel Container -->
          <div class="carousel-inner-unique">
            <div class="slides-container-unique" id="slidesContainerUnique">
              <!-- Slide 1 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214142_066.jpg" alt="Memory 1" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>Happy Times</h3>
                    <p>Beautiful memories together</p>
                  </div>
                </div>
              </div>
              
              <!-- Slide 2 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214120_915.jpg" alt="Memory 2" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>Special Moments</h3>
                    <p>Forever in my heart</p>
                  </div>
                </div>
              </div>
              
              <!-- Slide 3 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214144_968.jpg" alt="Memory 3" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>Unforgettable</h3>
                    <p>Best days of my life</p>
                  </div>
                </div>
              </div>
              
              <!-- Slide 4 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214146_773.jpg" alt="Memory 4" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>Together Forever</h3>
                    <p>My favorite person</p>
                  </div>
                </div>
              </div>
              
              <!-- Slide 5 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214151_348.jpg" alt="Memory 5" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>Pure Joy</h3>
                    <p>Smiles that light up my world</p>
                  </div>
                </div>
              </div>
              
              <!-- Slide 6 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214204_193.jpg" alt="Memory 6" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>My Moonlight</h3>
                    <p>Guiding light in my life</p>
                  </div>
                </div>
              </div>
              
              <!-- Slide 7 -->
              <div class="product-card-unique">
                <div class="img-box-unique">
                  <img src="hb/IMG_20260116_214201_727.jpg" alt="Memory 7" onerror="this.style.display='none';">
                  <div class="image-text-overlay-unique">
                    <h3>Endless Love</h3>
                    <p>You mean everything to me</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Right Button - Desktop Only -->
          <button class="nav-btn-unique next-btn-unique" id="nextBtnUnique">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </section>
    </div>

    <script>
        // Birthday Message Script
        const birthdayMessages = [
            {
                id: 'message1',
                text: "üéÇ Happy Birthday! üéâ",
                speed: 80,
                class: 'message-1'
            },
            {
                id: 'message2',
                text: "To My Mooon Light ‚ù§Ô∏è ",
                speed: 60,
                class: 'message-2',
                delay: 500
            },
            {
                id: 'message3',
                text: "On this special day, I want you to know...",
                speed: 40,
                class: 'message-3',
                delay: 800
            },
            {
                id: 'message4',
                text: "You are the most amazing person I know! ‚ú®",
                speed: 40,
                class: 'message-4',
                delay: 300
            },
            {
                id: 'message5',
                text: "May all your dreams come true üåü",
                speed: 50,
                class: 'message-5',
                delay: 400
            },
            {
                id: 'message6',
                text: "Wishing you endless joy, laughter, and happiness today and always. Hamesha khush rhe tu or meko teko ye btane ki zrurat toh hai nahi ki tu kitni special hai mere liye kyu k tu sab janti hai or ager btane bhi bethu toh mere pass word kam padh jayege ye btate huve ki ur so special for me nd ye 3 saal literally bhot zyda ache the like bhot hiii zyda.. kya hii btau me ab toh literally hamene kitni sari memorys bnayi hai vc pr ek dsure ko ghanto tak dekhna call pr bhot zyda bate karna itni bat toh aaj tak mene kabhi kisise nahi ki mene toh apne recharge k pase terese baat karte huve hii vasul kare hai heheh jo bhi hai meri life ka best part ho ap naina sabse acha part sabse Khubsurat part Thank you meri life mein aane k liye meri life ko itna acha or itni khushiya dene k liye thank you so much for everything",
                speed: 30,
                class: 'message-6',
                delay: 600
            }
        ];

        // Signature and date
        const signature = "Happy Birthday Moon light ‚ù§Ô∏è";
        const today = new Date().toLocaleDateString('en-US', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });

        // Typewriter function
        function typeWriter(elementId, text, speed, delay = 0) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const element = document.getElementById(elementId);
                    let i = 0;
                    
                    function type() {
                        if (i < text.length) {
                            element.innerHTML += text.charAt(i);
                            i++;
                            setTimeout(type, speed);
                        } else {
                            resolve();
                        }
                    }
                    
                    type();
                }, delay);
            });
        }

        // Start typing animation
        async function startTyping() {
            // Reset all messages
            birthdayMessages.forEach(msg => {
                document.getElementById(msg.id).innerHTML = '';
            });
            document.getElementById('signature').innerHTML = '';
            document.getElementById('date').innerHTML = '';
            
            // Hide replay button
            document.getElementById('replayBtn').classList.add('hidden');
            
            // Type each message sequentially
            for (const msg of birthdayMessages) {
                await typeWriter(msg.id, msg.text, msg.speed, msg.delay);
            }
            
            // After all messages are typed, show signature and date
            setTimeout(() => {
                document.getElementById('signature').innerHTML = signature;
                setTimeout(() => {
                    document.getElementById('date').innerHTML = today;
                    setTimeout(() => {
                        document.getElementById('replayBtn').classList.remove('hidden');
                    }, 500);
                }, 300);
            }, 500);
        }

        // Initialize birthday message when page loads
        document.addEventListener('DOMContentLoaded', () => {
            startTyping();
            
            // Replay button functionality
            document.getElementById('replayBtn').addEventListener('click', startTyping);
            
            // Add some interactive effects to hearts
            const hearts = document.querySelectorAll('.heart');
            hearts.forEach(heart => {
                heart.addEventListener('click', function() {
                    this.style.transform = 'scale(1.5)';
                    this.style.color = '#ff9a3c';
                    setTimeout(() => {
                        this.style.transform = '';
                        this.style.color = '';
                    }, 300);
                });
            });
            
            // Add ripple effect to birthday container
            const birthdayContainer = document.querySelector('.birthday-container');
            birthdayContainer.addEventListener('click', function(e) {
                if (e.target === this) {
                    const x = e.offsetX;
                    const y = e.offsetY;
                    
                    const ripple = document.createElement('div');
                    ripple.style.position = 'absolute';
                    ripple.style.width = '10px';
                    ripple.style.height = '10px';
                    ripple.style.backgroundColor = 'rgba(255, 107, 107, 0.3)';
                    ripple.style.borderRadius = '50%';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.style.transform = 'translate(-50%, -50%)';
                    ripple.style.pointerEvents = 'none';
                    ripple.style.zIndex = '1';
                    
                    this.appendChild(ripple);
                    
                    ripple.animate([
                        { transform: 'translate(-50%, -50%) scale(0)', opacity: 1 },
                        { transform: 'translate(-50%, -50%) scale(20)', opacity: 0 }
                    ], {
                        duration: 1000,
                        easing: 'ease-out'
                    });
                    
                    setTimeout(() => ripple.remove(), 1000);
                }
            });
            
            // Initialize product carousel
            initializeProductCarousel();
            
            // Scroll to carousel when clicking indicator
            document.getElementById('scrollIndicator').addEventListener('click', () => {
                document.getElementById('productCarouselSection').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            });
        });

        // PRODUCT CAROUSEL SCRIPT
        function initializeProductCarousel() {
            const slidesContainer = document.getElementById('slidesContainerUnique');
            const prevBtn = document.getElementById('prevBtnUnique');
            const nextBtn = document.getElementById('nextBtnUnique');
            const productCards = document.querySelectorAll('.product-card-unique');
            
            if (!slidesContainer || !prevBtn || !nextBtn || productCards.length === 0) {
                console.error('Carousel elements not found');
                return;
            }
            
            // Detect if mobile
            const isMobile = window.innerWidth <= 768;
            let currentSlideIndex = 0;
            let cardsPerView = isMobile ? 1 : calculateCardsPerView();
            
            // Function to calculate cards per view based on screen size
            function calculateCardsPerView() {
                const screenWidth = window.innerWidth;
                
                if (screenWidth <= 768) {
                    return 1;
                } else if (screenWidth <= 1024) {
                    return 2;
                } else {
                    return 3;
                }
            }
            
            // Function to setup mobile scrolling
            function setupMobileScrolling() {
                if (window.innerWidth > 768) return;
                
                // Remove desktop behavior
                slidesContainer.style.transform = 'none';
                slidesContainer.style.transition = 'none';
                
                // Setup scroll snapping
                let isScrolling = false;
                let scrollTimeout;
                
                // Handle scroll events for mobile
                slidesContainer.addEventListener('scroll', function() {
                    if (!isScrolling) {
                        isScrolling = true;
                    }
                    
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(function() {
                        isScrolling = false;
                        snapToNearestCard();
                    }, 100);
                });
                
                // Function to snap to nearest card
                function snapToNearestCard() {
                    const containerWidth = slidesContainer.offsetWidth;
                    const scrollLeft = slidesContainer.scrollLeft;
                    const cardWidth = productCards[0].offsetWidth + 15;
                    
                    // Calculate which card is closest
                    const nearestIndex = Math.round(scrollLeft / cardWidth);
                    
                    // Snap to that card
                    slidesContainer.scrollTo({
                        left: nearestIndex * cardWidth,
                        behavior: 'smooth'
                    });
                    
                    // Update current index
                    currentSlideIndex = Math.min(nearestIndex, productCards.length - 1);
                }
            }
            
            // Function to update carousel position (Desktop only)
            function updateCarouselPosition() {
                if (window.innerWidth <= 768) {
                    setupMobileScrolling();
                    return;
                }
                
                // Update cards per view
                cardsPerView = calculateCardsPerView();
                
                // Calculate maximum slide index
                const maxSlideIndex = Math.max(0, productCards.length - cardsPerView);
                
                // Ensure current index is within bounds
                if (currentSlideIndex > maxSlideIndex) {
                    currentSlideIndex = maxSlideIndex;
                }
                
                // Get first card to calculate dimensions
                const firstCard = productCards[0];
                if (!firstCard) return;
                
                // Calculate card width including gap
                const cardWidth = firstCard.offsetWidth;
                const gap = 15;
                
                // Calculate translation
                const translateX = currentSlideIndex * (cardWidth + gap);
                
                // Apply transform
                slidesContainer.style.transform = `translateX(-${translateX}px)`;
                slidesContainer.style.transition = 'transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                
                // Update button states
                updateButtonStates(maxSlideIndex);
            }
            
            // Function to update button states (Desktop only)
            function updateButtonStates(maxSlideIndex) {
                if (window.innerWidth <= 768) return;
                
                const isAtStart = currentSlideIndex === 0;
                const isAtEnd = currentSlideIndex >= maxSlideIndex;
                
                // Update buttons
                prevBtn.disabled = isAtStart;
                prevBtn.style.opacity = isAtStart ? '0.3' : '1';
                prevBtn.style.cursor = isAtStart ? 'not-allowed' : 'pointer';
                
                nextBtn.disabled = isAtEnd;
                nextBtn.style.opacity = isAtEnd ? '0.3' : '1';
                nextBtn.style.cursor = isAtEnd ? 'not-allowed' : 'pointer';
            }
            
            // Function to go to next slide (Desktop only)
            function goToNextSlide() {
                if (window.innerWidth <= 768) return;
                
                cardsPerView = calculateCardsPerView();
                const maxSlideIndex = Math.max(0, productCards.length - cardsPerView);
                
                if (currentSlideIndex < maxSlideIndex) {
                    currentSlideIndex++;
                    updateCarouselPosition();
                }
            }
            
            // Function to go to previous slide (Desktop only)
            function goToPrevSlide() {
                if (window.innerWidth <= 768) return;
                
                if (currentSlideIndex > 0) {
                    currentSlideIndex--;
                    updateCarouselPosition();
                }
            }
            
            // Event listeners for navigation buttons (Desktop only)
            nextBtn.addEventListener('click', goToNextSlide);
            prevBtn.addEventListener('click', goToPrevSlide);
            
            // Handle window resize
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    const isNowMobile = window.innerWidth <= 768;
                    
                    if (isNowMobile) {
                        // Switch to mobile mode
                        slidesContainer.style.transform = 'none';
                        slidesContainer.style.transition = 'none';
                        slidesContainer.style.overflowX = 'auto';
                        prevBtn.style.display = 'none';
                        nextBtn.style.display = 'none';
                        setupMobileScrolling();
                    } else {
                        // Switch to desktop mode
                        slidesContainer.style.overflowX = 'hidden';
                        prevBtn.style.display = 'flex';
                        nextBtn.style.display = 'flex';
                        currentSlideIndex = 0;
                        updateCarouselPosition();
                    }
                }, 250);
            });
            
            // Initialize based on screen size
            if (window.innerWidth <= 768) {
                // Mobile initialization
                setupMobileScrolling();
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
            } else {
                // Desktop initialization
                updateCarouselPosition();
            }
            
            // Handle image loading errors
            const images = document.querySelectorAll('.img-box-unique img');
            images.forEach(img => {
                img.addEventListener('error', function() {
                    this.style.display = 'none';
                    const parent = this.parentElement;
                    const errorMsg = document.createElement('div');
                    errorMsg.style.position = 'absolute';
                    errorMsg.style.top = '50%';
                    errorMsg.style.left = '50%';
                    errorMsg.style.transform = 'translate(-50%, -50%)';
                    errorMsg.style.textAlign = 'center';
                    errorMsg.style.color = '#666';
                    errorMsg.style.fontSize = '14px';
                    errorMsg.innerHTML = 'Image not available<br><small>Memory in heart ‚ù§Ô∏è</small>';
                    parent.appendChild(errorMsg);
                });
            });
        }
    </script>
</body>
</html>
